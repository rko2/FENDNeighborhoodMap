function initMap(){var a=new google.maps.LatLng(41.90873,-87.679385);map=new google.maps.Map(document.getElementById("map"),{center:a,zoom:15,disableDoubleClickZoom:!0})}function makeinfowindow(a){var b='<div class="infowindow">';b+='<div class="topinfo>"<h4>'+a.title+"</h4>",b+="<p>"+a.phone+"</p></div>",b+='<div class="snippet"><img src="'+a.snipimg+'"><p>'+a.sniptext+"</p></div>",b+="</div>",infowindow.setContent(String(b)),infowindow.open(map,a)}function googleMarkers(a){function b(){for(var a=0;a<allmarkers.length;a++)allmarkers[a].setMap(null);allmarkers=[]}allmarkers.length>0&&b();for(var c=0;c<a.length;c++){var d=new google.maps.LatLng(a[c][2],a[c][3]),e=new google.maps.Marker({position:d,map:map,title:a[c][0],phone:a[c][1],sniptext:a[c][4],snipimg:a[c][5],visible:!0});allmarkers.push(e),google.maps.event.addListener(e,"mouseover",function(a,b){return function(){makeinfowindow(a)}}(e,c)),google.maps.event.addListener(e,"click",function(a,b){return function(){makeinfowindow(a)}}(e,c))}var f=$("li");f.mouseover(function(){$(this).addClass("selected");var a=$("li").index(this);makeinfowindow(allmarkers[a])}),f.mouseout(function(){$(this).removeClass("selected")})}function Yelp(a,b){var c={consumerKey:"PDTwNISGHOMT--mxGVuM9w",consumerSecret:"id_cBoLI1WywV1Pgechh_o8qnbE",accessToken:"56ehWaYgsMGVbzmfQQb90OKbAOxhYbPQ",accessTokenSecret:"8T_r9zF3EV3WH65VIiaknZB34qg",serviceProvider:{signatureMethod:"HMAC-SHA1"}},d={consumerSecret:c.consumerSecret,tokenSecret:c.accessTokenSecret};parameters=[],parameters.push(["term",b]),parameters.push(["location",a]),parameters.push(["callback","cb"]),parameters.push(["oauth_consumer_key",c.consumerKey]),parameters.push(["oauth_consumer_secret",c.consumerSecret]),parameters.push(["oauth_token",c.accessToken]),parameters.push(["oauth_signature_method","HMAC-SHA1"]);var e={action:"http://api.yelp.com/v2/search",method:"GET",parameters:parameters};OAuth.setTimestampAndNonce(e),OAuth.SignatureMethod.sign(e,d);var f=OAuth.getParameterMap(e.parameters);yelpajax(e.action,f)}function yelpajax(a,b){$.ajax({url:a,data:b,dataType:"jsonp",global:!0,cache:!0,jsonpCallback:"cb",success:function(a){listdisplay(a)}})}function listdisplay(a){var b=$(".results"),c=a.businesses,d=[],e="";if(b.empty(),c.length>0){for(var f=0;f<c.length;f++){var g=c[f],h=g.name,i=(g.image_url,g.display_phone),j=g.url,k=g.rating_img_url_small,l=g.location.coordinate.latitude,m=g.location.coordinate.longitude,n=g.snippet_text,o=g.snippet_image_url;g.location.display_address;e='<li id="list"><a href="'+j+'">'+h+'</a> <img src="'+k+'"></li><br>';var p=[h,i,l,m,n,o];d.push(p),b.append(e)}google.maps.event.addDomListener(window,"load",googleMarkers(d))}else{var q=$("input").val();$yelpResults.append("<li><h3>Oh no! We can't seem to find anything for <span>"+q+"</span>.</h3><p>Try searching something else.</p></li>"),google.maps.event.addDomListener(window,"load",googleMarkers(d))}}var map,allmarkers=[],infowindow=new google.maps.InfoWindow;initMap(),Yelp("60622","Bars");